<!--
@license
Copyright (c) 2016 A-labs. All rights reserved.
/////////////////
LOCALS
/////////////////
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../locals-object/locals-object.html">
<link rel="import" href="../locals-object/locals-dataobject.html">

<!--
An element providing a solution to no problem in particular.

Example:

    <locals-avatar></locals-avatar>

Example:

    <locals-avatar>
      <h2>Hello locals-avatar</h2>
    </locals-avatar>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="locals-avatar">
  <template>
   <locals-object on-internalstatechange="fixdata" config="[[config]]" dataconfig="{{dataconfig}}" state="{{visualstate}}" on-state-changed="visualstatechanged"></locals-object>
  <locals-dataobject on-state-changed="datastatechanged" state="{{datastate}}" config="[[dataconfig]]"></locals-dataobject>
  </template>

  <script>
    Polymer({
      is: 'locals-avatar',

      properties: {
        config: {
          type: Object,
        },
        version: {
          type: String,
          value: '0.0.1'
        },
        visualstate: {
          type: Array,
          notify: true
        },
        datastate: {
          type: Object,
          notify: true
        }
      },

      fixdata: function(e){
        console.log('fix data',e.detail);

        console.log('color of body',e.detail[this.layerindex['body']][1]);
        console.log('color of head',e.detail[this.layerindex['head']][1]);

        // copy head color to body color
        if (e.detail[this.layerindex['head']][1] != e.detail[this.layerindex['body']][1]){
          e.detail[this.layerindex['head']][1] = e.detail[this.layerindex['body']][1];
          this.visualstate = e.detail;
        }

      },

      // Element Lifecycle
      ready: function() {

        this.dataconfig = {
          fields: [
            {
              name: "firstname",
              type: "input",
              label: "Firstname"
            }, {
              name: "lastname",
              type: "input",
              label: "Lastname"
            }, {
              name: "birthplace",
              type: "input",
              label: "Birthplace"
            }, {
              name: "birthdate",
              type: "input",
              label: "Birthdate"
            },
          ]
        };

        this.config = 

{ layers: 
   [ { name: 'body',
       icon: this.resolveUrl("./images/avatarmale/body-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/body-icon-selected.png"),
       variants: [ 'male' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'male-blue': this.resolveUrl("./images/avatarmale/0-avatar-body-male-blue.png"),
          'male-darkblue': this.resolveUrl("./images/avatarmale/0-avatar-body-male-darkblue.png"),
          'male-green': this.resolveUrl("./images/avatarmale/0-avatar-body-male-green.png"),
          'male-lightblue': this.resolveUrl("./images/avatarmale/0-avatar-body-male-lightblue.png"),
          'male-purple': this.resolveUrl("./images/avatarmale/0-avatar-body-male-purple.png"),
          'male-red': this.resolveUrl("./images/avatarmale/0-avatar-body-male-red.png"),
          'male-white': this.resolveUrl("./images/avatarmale/0-avatar-body-male-white.png"),
          'male-yellow': this.resolveUrl("./images/avatarmale/0-avatar-body-male-yellow.png") } },
     { name: 'shoes',
       icon: this.resolveUrl("./images/avatarmale/shoes-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/shoes-icon-selected.png"),
       variants: [ 'arado', 'flipflop', 'kurgan', 'plain' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'arado-blue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-blue.png"),
          'arado-darkblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-darkblue.png"),
          'arado-green': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-green.png"),
          'arado-lightblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-lightblue.png"),
          'arado-purple': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-purple.png"),
          'arado-red': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-red.png"),
          'arado-white': this.resolveUrl("./images/avatarmale/1-avatar-shoes-arado-white.png"),
          'flipflop-blue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-blue.png"),
          'flipflop-darkblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-darkblue.png"),
          'flipflop-green': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-green.png"),
          'flipflop-lightblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-lightblue.png"),
          'flipflop-purple': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-purple.png"),
          'flipflop-red': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-red.png"),
          'flipflop-white': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-white.png"),
          'flipflop-yellow': this.resolveUrl("./images/avatarmale/1-avatar-shoes-flipflop-yellow.png"),
          'kurgan-blue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-blue.png"),
          'kurgan-green': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-green.png"),
          'kurgan-lightblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-lightblue.png"),
          'kurgan-purple': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-purple.png"),
          'kurgan-red': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-red.png"),
          'kurgan-white': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-white.png"),
          'kurgan-yellow': this.resolveUrl("./images/avatarmale/1-avatar-shoes-kurgan-yellow.png"),
          'plain-blue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-blue.png"),
          'plain-darkblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-darkblue.png"),
          'plain-green': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-green.png"),
          'plain-lightblue': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-lightblue.png"),
          'plain-purple': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-purple.png"),
          'plain-red': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-red.png"),
          'plain-white': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-white.png"),
          'plain-yellow': this.resolveUrl("./images/avatarmale/1-avatar-shoes-plain-yellow.png") } },
     { name: 'bottom',
       icon: this.resolveUrl("./images/avatarmale/bottom-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/bottom-icon-selected.png"),
       variants: [ 'mara', 'shazam', 'skilo' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'mara-blue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-blue.png"),
          'mara-darkblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-darkblue.png"),
          'mara-green': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-green.png"),
          'mara-lightblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-lightblue.png"),
          'mara-purple': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-purple.png"),
          'mara-red': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-red.png"),
          'mara-white': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-white.png"),
          'mara-yellow': this.resolveUrl("./images/avatarmale/2-avatar-bottom-mara-yellow.png"),
          'shazam-blue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-blue.png"),
          'shazam-darkblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-darkblue.png"),
          'shazam-green': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-green.png"),
          'shazam-lightblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-lightblue.png"),
          'shazam-purple': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-purple.png"),
          'shazam-red': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-red.png"),
          'shazam-white': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-white.png"),
          'shazam-yellow': this.resolveUrl("./images/avatarmale/2-avatar-bottom-shazam-yellow.png"),
          'skilo-blue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-blue.png"),
          'skilo-darkblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-darkblue.png"),
          'skilo-green': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-green.png"),
          'skilo-lightblue': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-lightblue.png"),
          'skilo-purple': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-purple.png"),
          'skilo-red': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-red.png"),
          'skilo-white': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-white.png"),
          'skilo-yellow': this.resolveUrl("./images/avatarmale/2-avatar-bottom-skilo-yellow.png") } },
     { name: 'top',
       icon: this.resolveUrl("./images/avatarmale/top-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/top-icon-selected.png"),
       variants: [ 'loma', 'miikelsen', 'mrsmith', 'rico', 'sheek' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'loma-blue': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-blue.png"),
          'loma-darkblue': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-darkblue.png"),
          'loma-green': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-green.png"),
          'loma-lightblue': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-lightblue.png"),
          'loma-purple': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-purple.png"),
          'loma-red': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-red.png"),
          'loma-white': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-white.png"),
          'loma-yellow': this.resolveUrl("./images/avatarmale/3-avatar-top-loma-yellow.png"),
          'miikelsen-blue': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-blue.png"),
          'miikelsen-darkblue': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-darkblue.png"),
          'miikelsen-green': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-green.png"),
          'miikelsen-lightblue': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-lightblue.png"),
          'miikelsen-purple': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-purple.png"),
          'miikelsen-red': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-red.png"),
          'miikelsen-white': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-white.png"),
          'miikelsen-yellow': this.resolveUrl("./images/avatarmale/3-avatar-top-miikelsen-yellow.png"),
          'mrsmith-blue': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-blue.png"),
          'mrsmith-darkblue': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-darkblue.png"),
          'mrsmith-green': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-green.png"),
          'mrsmith-lightblue': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-lightblue.png"),
          'mrsmith-purple': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-purple.png"),
          'mrsmith-red': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-red.png"),
          'mrsmith-white': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-white.png"),
          'mrsmith-yellow': this.resolveUrl("./images/avatarmale/3-avatar-top-mrsmith-yellow.png"),
          'rico-blue': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-blue.png"),
          'rico-darkblue': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-darkblue.png"),
          'rico-green': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-green.png"),
          'rico-lightblue': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-lightblue.png"),
          'rico-purple': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-purple.png"),
          'rico-red': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-red.png"),
          'rico-white': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-white.png"),
          'rico-yellow': this.resolveUrl("./images/avatarmale/3-avatar-top-rico-yellow.png"),
          'sheek-blue': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-blue.png"),
          'sheek-green': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-green.png"),
          'sheek-lightblue': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-lightblue.png"),
          'sheek-purple': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-purple.png"),
          'sheek-red': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-red.png"),
          'sheek-white': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-white.png"),
          'sheek-yellow': this.resolveUrl("./images/avatarmale/3-avatar-top-sheek-yellow.png") } },
     { name: 'head',
       icon: this.resolveUrl("./images/avatarmale/head-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/head-icon-selected.png"),
       variants: [ 'male' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'male-blue': this.resolveUrl("./images/avatarmale/4-avatar-head-male-blue.png"),
          'male-darkblue': this.resolveUrl("./images/avatarmale/4-avatar-head-male-darkblue.png"),
          'male-green': this.resolveUrl("./images/avatarmale/4-avatar-head-male-green.png"),
          'male-lightblue': this.resolveUrl("./images/avatarmale/4-avatar-head-male-lightblue.png"),
          'male-purple': this.resolveUrl("./images/avatarmale/4-avatar-head-male-purple.png"),
          'male-red': this.resolveUrl("./images/avatarmale/4-avatar-head-male-red.png"),
          'male-white': this.resolveUrl("./images/avatarmale/4-avatar-head-male-white.png"),
          'male-yellow': this.resolveUrl("./images/avatarmale/4-avatar-head-male-yellow.png") } },
     { name: 'facemale',
       icon: this.resolveUrl("./images/avatarmale/facemale-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/facemale-icon-selected.png"),
       variants: [ 'nooptions' ],
       colors: [ 'nocolors' ],
       images: { 'nooptions-nocolors': this.resolveUrl("./images/avatarmale/5-avatar-facemale-nooptions-nocolors.png") } },
     { name: 'glasses',
       icon: this.resolveUrl("./images/avatarmale/glasses-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/glasses-icon-selected.png"),
       variants: [ 'happo' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'happo-blue': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-blue.png"),
          'happo-darkblue': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-darkblue.png"),
          'happo-green': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-green.png"),
          'happo-lightblue': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-lightblue.png"),
          'happo-purple': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-purple.png"),
          'happo-red': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-red.png"),
          'happo-white': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-white.png"),
          'happo-yellow': this.resolveUrl("./images/avatarmale/6-avatar-glasses-happo-yellow.png") } },
     { name: 'beard',
       icon: this.resolveUrl("./images/avatarmale/beard-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/beard-icon-selected.png"),
       variants: [ 'beadr', 'bobiar', 'kahlem', 'lebu' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'beadr-blue': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-blue.png"),
          'beadr-darkblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-darkblue.png"),
          'beadr-green': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-green.png"),
          'beadr-lightblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-lightblue.png"),
          'beadr-purple': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-purple.png"),
          'beadr-red': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-red.png"),
          'beadr-white': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-white.png"),
          'beadr-yellow': this.resolveUrl("./images/avatarmale/7-avatar-beard-beadr-yellow.png"),
          'bobiar-blue': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-blue.png"),
          'bobiar-darkblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-darkblue.png"),
          'bobiar-green': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-green.png"),
          'bobiar-lightblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-lightblue.png"),
          'bobiar-purple': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-purple.png"),
          'bobiar-red': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-red.png"),
          'bobiar-white': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-white.png"),
          'bobiar-yellow': this.resolveUrl("./images/avatarmale/7-avatar-beard-bobiar-yellow.png"),
          'kahlem-blue': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-blue.png"),
          'kahlem-darkblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-darkblue.png"),
          'kahlem-green': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-green.png"),
          'kahlem-lightblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-lightblue.png"),
          'kahlem-purple': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-purple.png"),
          'kahlem-red': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-red.png"),
          'kahlem-white': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-white.png"),
          'kahlem-yellow': this.resolveUrl("./images/avatarmale/7-avatar-beard-kahlem-yellow.png"),
          'lebu-blue': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-blue.png"),
          'lebu-darkblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-darkblue.png"),
          'lebu-green': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-green.png"),
          'lebu-lightblue': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-lightblue.png"),
          'lebu-purple': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-purple.png"),
          'lebu-red': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-red.png"),
          'lebu-white': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-white.png"),
          'lebu-yellow': this.resolveUrl("./images/avatarmale/7-avatar-beard-lebu-yellow.png") } },
     { name: 'snit',
       icon: this.resolveUrl("./images/avatarmale/snit-icon.png"),
       iconselected: this.resolveUrl("./images/avatarmale/snit-icon-selected.png"),
       variants: 
        [ 'albifrons',
          'apella',
          'capucinus',
          'flavius',
          'kaapori',
          'ustus',
          'vanzolini' ],
       colors: 
        [ 'blue',
          'darkblue',
          'green',
          'lightblue',
          'purple',
          'red',
          'white',
          'yellow' ],
       images: 
        { 'albifrons-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-blue.png"),
          'albifrons-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-darkblue.png"),
          'albifrons-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-green.png"),
          'albifrons-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-lightblue.png"),
          'albifrons-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-purple.png"),
          'albifrons-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-red.png"),
          'albifrons-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-white.png"),
          'albifrons-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-albifrons-yellow.png"),
          'apella-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-blue.png"),
          'apella-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-darkblue.png"),
          'apella-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-green.png"),
          'apella-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-lightblue.png"),
          'apella-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-purple.png"),
          'apella-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-red.png"),
          'apella-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-white.png"),
          'apella-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-apella-yellow.png"),
          'capucinus-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-blue.png"),
          'capucinus-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-darkblue.png"),
          'capucinus-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-green.png"),
          'capucinus-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-lightblue.png"),
          'capucinus-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-purple.png"),
          'capucinus-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-red.png"),
          'capucinus-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-white.png"),
          'capucinus-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-capucinus-yellow.png"),
          'flavius-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-blue.png"),
          'flavius-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-darkblue.png"),
          'flavius-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-green.png"),
          'flavius-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-lightblue.png"),
          'flavius-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-purple.png"),
          'flavius-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-red.png"),
          'flavius-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-white.png"),
          'flavius-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-flavius-yellow.png"),
          'kaapori-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-blue.png"),
          'kaapori-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-darkblue.png"),
          'kaapori-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-green.png"),
          'kaapori-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-lightblue.png"),
          'kaapori-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-purple.png"),
          'kaapori-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-red.png"),
          'kaapori-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-white.png"),
          'kaapori-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-kaapori-yellow.png"),
          'ustus-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-blue.png"),
          'ustus-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-darkblue.png"),
          'ustus-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-green.png"),
          'ustus-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-lightblue.png"),
          'ustus-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-purple.png"),
          'ustus-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-red.png"),
          'ustus-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-white.png"),
          'ustus-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-ustus-yellow.png"),
          'vanzolini-blue': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-blue.png"),
          'vanzolini-darkblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-darkblue.png"),
          'vanzolini-green': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-green.png"),
          'vanzolini-lightblue': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-lightblue.png"),
          'vanzolini-purple': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-purple.png"),
          'vanzolini-red': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-red.png"),
          'vanzolini-white': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-white.png"),
          'vanzolini-yellow': this.resolveUrl("./images/avatarmale/8-avatar-snit-vanzolini-yellow.png") } } ],
  defaultstate: 
   [ [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ],
     [ 0, 0 ] ] }



;

  this.layerindex = {};

    var self= this;
      // make some layers invisible
      this.config.layers = this.config.layers.map(function(layer,index){
        self.layerindex[layer.name] = index;
        if (layer.name == 'head' || layer.name == 'facemale'){
          layer.hidden = true;
        }
        return layer;
      });


        if (!this.visualstate) {
          // default state
          this.visualstate = this.config.defaultstate;
        }

        if (!this.datastate) {
          this.datastate = {
              "firstname": "",
              "lastname": "",
              "birthdate": "",
              "birthplace": ""
          }
        }


      },

      attached: function() {
        // `attached` fires once the element and its parents have been inserted
        // into a document.
        //
        // This is a good place to perform any work related to your element's
        // visual state or active behavior (measuring sizes, beginning animations,
        // loading resources, etc).
      },

      detached: function() {
        // The analog to `attached`, `detached` fires when the element has been
        // removed from a document.
        //
        // Use this to clean up anything you did in `attached`.
      },

      visualstatechanged: function() {
        //console.log('Visual state changed');
        this.fire('visual-state-changed',this.visualstate);
      },

      datastatechanged: function() {
        //console.log('Data state changed');
        this.fire('data-state-changed',this.datastate);
      },


    });
  </script>
</dom-module>
